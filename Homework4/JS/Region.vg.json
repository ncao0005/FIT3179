{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800,
    "height": 600,
    "title": "Number of flights taht port at different region",
    "layer": [
      {
      "data": {
      "url": "https://raw.githubusercontent.com/ncao0005/FIT3179/main/Homework4/Data/Homework4Region.csv"
    },
    "params": [
      {
        "name": "continent_highlight",
        "select":{"type": "point","fields": ["PortRegion"]},
        "bind":"legend"
      }
    ],
     "transform": [ 
       {
         "aggregate": [{
           "op": "sum",
           "field": "Allflights",
           "as":"Totalflights"
         }],
         "groupby": ["PortRegion","Month"]
       }
    ],
        "mark":"bar",
        "encoding": {
          "x":{"field":"Month","type": "ordinal","axis":{"labelAngle":-45}},
          "y":{
            "aggregate":"sum", "field":"Totalflights", "title":"Total number of flights"
          },
          "color":{
            "field":"PortRegion"
          },
          "tooltip":[
             {"field": "PortRegion", "type": "nominal"},
             {"field": "Totalflights", "type": "quantitative", "title":"Total number of flights"}
          ],
          "opacity":{
            "condition": {"param": "continent_highlight", "value": 1},
            "value": 0.2
          }
        }
      },
      {
      "data": {
        "url": "https://raw.githubusercontent.com/ncao0005/FIT3179/main/Homework4/Data/Homework4Region.csv"
      },
       "transform": [ 
       {
         "aggregate": [{
           "op": "sum",
           "field": "Allflights",
           "as":"Totalflights"
         }],
         "groupby": ["PortRegion","Month"]
       }
    ],
      "mark": {
        "type": "text",
        "align": "center",
        "baseline": "middle",
        "dy":-4,
        "fontSize": 10,
        "color":"blue"
      },
      "encoding": {
      "x": {"field":"Month","type": "ordinal"},
      "y": {"aggregate":"sum", "field":"Totalflights"},
      "text": {"aggregate":"sum", "field":"Totalflights", "type": "nominal"}
      }
      }
    ]
}